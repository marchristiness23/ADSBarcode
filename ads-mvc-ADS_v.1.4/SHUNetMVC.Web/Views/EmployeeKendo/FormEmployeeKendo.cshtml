    @model  SHUNetMVC.Abstraction.Model.Dto.EmployeeDto
@{
    ViewBag.Title = "Form Employee Kendo";
    var isEdit = ViewBag.Mode == "View";
}
<br />
<div class="container" style="float: inline-start; padding: 0 2%; max-width: 100%">
    <div style="text-align:left">
        <span class="fa-solid fa-chevron-left" style="cursor: pointer;" onclick="redirectIndex()"> <strong>Back</strong></span>
    </div>
    <br />
    <h2>
        @ViewBag.Title
    </h2>
    <div class="border-bottom" style="margin-bottom: 1%;"></div>
    <form id="employeeForm">
        <div class="row mb-3">
            <div class="col-sm-6">
                <label>Employee ID <span style="color: #F50707;">*</span></label>
                @Html.Kendo().TextBox().Name("EmpId").Readonly(true)
            </div>
            <div class="col-sm-6">
                <label>Employee Name <span style="color: #F50707;">*</span></label>
                @Html.Kendo().TextBox().Name("EmpName")
            </div>
        </div>
        <div class="row mb-3">
            <div class="col-sm-6">
                <label>Employee Position <span style="color: #F50707;">*</span></label>
                @Html.Kendo().TextBox().Name("EmpPosition")
            </div>
            <div class="col-sm-6">
                <label>Department <span style="color: #F50707;">*</span></label>
                @(Html.Kendo().DropDownList()
                .Name("DepartementId")
                .DataTextField("DepartementName")
                .DataValueField("DepartementId")
                .DataSource(source =>
                {
                    source.Read(read =>
                    {
                        read.Action("GetDepartment", "Common");
                    });
                })
                )
            </div>
        </div>
        <div class="row mb-3">
            <div class="col-sm-6">
                <label>Birth Date <span style="color: #F50707;">*</span></label>
                @(Html.Kendo().DatePicker().Name("Birthdate").Format("dd MMM yyyy "))
            </div>
            <div class="col-sm-6">
                <label>Organization Unit Id <span style="color: #F50707;">*</span></label>
                @(Html.Kendo().NumericTextBox().Name("OrgUnitId").Min(0))
            </div>
        </div>
        <div class="row mb-3">
            <div class="col-sm-6">
                <label>Score <span style="color: #F50707;">*</span></label>
                @(Html.Kendo().NumericTextBox().Name("Score").Min(0))
            </div>
            <div class="col-sm-6">
                <label>Address <span style="color: #F50707;">*</span></label>
                @(Html.Kendo().TextBox().Name("Address"))
            </div>
        </div>
        <div class="row mb-3">
            <div class="col-sm-6">
                <label>City <span style="color: #F50707;">*</span></label>
                @(Html.Kendo().TextBox().Name("City"))
            </div>
            <div class="col-sm-6">
                <label>Postal Code <span style="color: #F50707;">*</span></label>
                @(Html.Kendo().TextBox().Name("PostalCode"))
            </div>
        </div>
        <div class="row mb-3">
            <div class="col-sm-6">
                <label>Phone <span style="color: #F50707;">*</span></label>
                @(Html.Kendo().TextBox().Name("Phone"))
            </div>
            <div class="col-sm-6">
                <label>Email <span style="color: #F50707;">*</span></label>
                @(Html.Kendo().TextBox().Name("Email"))
            </div>
        </div>
        <div class="border-bottom" style="margin-bottom: 1%;"></div>
        <div style="text-align:right">
            @if (isEdit)
            {
                <button class="btn btn-primary" type="button" style="border-radius: 4px;" onclick="update()">Update</button>
            }
            else
            {
                <button class="btn btn-outline-primary" type="button" style="border-radius: 4px;" onclick="save()">Save as Draft</button>
            }
        </div>
    </form>
    
</div>
<script>
    function redirectIndex() {
        var url = '@Url.Action("Index", "EmployeeKendo")';
        window.location.href = url;
    }
    function save() {
        let data = $('#employeeForm').serialize();
        var url = '@Url.Action("Create", "EmployeeKendo")';
        $.ajax({
            type: "POST",
            url: url,
            data: data,
            success: function (response) {
                if (response.Success == true) {
                    alert("OK")
                } else {

                }
            }
        })
    }
    function update() {
        let data = $('#employeeForm').serialize();
        var url = '@Url.Action("Update", "EmployeeKendo")';
        $.ajax({
            type: "POST",
            url: url,
            data: data,
            success: function (response) {
                if (response.Success) {
                    alert("Employee updated successfully");
                } else {
                    alert("Error updating employee");
                }
            }
        });
    }
</script>